<!doctype html>
<html>

<head>
    <title>This is the title of the webpage!</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
</head>

<body>
    <button name="button" value="" type="button" onclick="getProducts()">Show Products</button>
    <button name="button" value="" type="button" onclick="createProduct()">Create Products</button>
    <button name="button" value="" type="button" onclick="getProductDetails()">Get Product</button>
    <button name="button" value="" type="button" onclick="updateProduct()">Update Product</button>
    <button name="button" value="" type="button" onclick="deleteProduct()">Delete Product</button>
    <script>
        let products = [];
        async function getProducts() {
            let url = 'https://20a7-103-249-233-8.ngrok.io/app/get-product-list?shop=first-step-demo.myshopify.com';
            let response = await axios.get(
                url,
            );
            console.log('products : ', response);
            products = response.data.data;
            console.log(products)

            for (let i = 0; i < products.length; i++) {
                document.write('<div class="card">');
                document.write('<h1>' + products[i].title + '</h1>');
                document.write('</div>');
            }
        }

        async function createProduct() {
            console.log('create clicked');
            let url = 'https://20a7-103-249-233-8.ngrok.io/app/create-product?shop=first-step-demo.myshopify.com';
            let response = await axios.post(
                url,{}
            );
            console.log('products : ', response);
            products = response.data.products;
            console.log(products)
        }

        async function getProductDetails() {
            console.log('Get product clicked')
            let url = 'https://20a7-103-249-233-8.ngrok.io/app/get-product/7075852845252?shop=first-step-demo.myshopify.com';
            let response = await axios.get(
                url,{}
            );
            console.log('products : ', response);
            products = response.data.products;
            console.log(products)
        }

        async function updateProduct() {
            console.log('update clicked');
            let url = 'https://20a7-103-249-233-8.ngrok.io/app/update-product/7075852845252?shop=first-step-demo.myshopify.com';
            let response = await axios.post(
                url,{}
            );
            console.log('products : ', response);
            products = response.data.products;
            console.log(products)
        }

        async function deleteProduct() {
            console.log('delete clicked');
            let url = 'https://20a7-103-249-233-8.ngrok.io/app/delete-product/7075852845252?shop=first-step-demo.myshopify.com';
            let response = await axios.post(
                url,{}
            );
            console.log('products : ', response);
            products = response.data.products;
            console.log(products)
        }

    </script>
</body>

</html>